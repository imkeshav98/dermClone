<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/navbar.css">
    <link rel="stylesheet" href="../css/filteroptions.css">
    <link rel="stylesheet" href="../css/product_container.css">
    <link rel="stylesheet" href="../css/cart.css">

    <title>Men's Skincare & Grooming Products | Dermstore</title>

</head>
<style>
    
</style>

<body>
    <div class="space-above-nav"></div>
    <!-------- Navigation Bar Starts Here ----------->
    <nav class="navigation">
        <div class="nav-container">
            <div class="main-nav">
                <img src="https://i.postimg.cc/nc4J56hc/dermstore-logo.png" alt="dermstore_logo" class="logo-icon"
                    onclick="location.href='../index.html';">
                <div class="nav-search">
                    <img src="https://i.postimg.cc/5NQBNjyb/menu.png" alt="menu" class="mobile-menu">
                    <input type="text" class="search-container" placeholder="Search for a product or brand..">
                    <img src="https://i.postimg.cc/90c6jfMm/search-interface-symbol.png" alt="search icon"
                        class="search-icon">
                    <img src="https://i.postimg.cc/90c6jfMm/search-interface-symbol.png" alt="search icon"
                        class="mobile-search-icon">
                    <img src="https://i.postimg.cc/Lgdct409/close.png" alt="close button" class="search-close-button">
                </div>
                <img src="https://i.postimg.cc/nc4J56hc/dermstore-logo.png" alt="dermstore_logo"
                    class="mobile-logo-icon" onclick="location.href='../index.html';">
                <div class="account-cart">
                    <div class="nav_account">
                        <img src="https://i.postimg.cc/wjtLkcVz/user.png" alt="account-icon" class="account-icon"
                            onclick="location.href='login.html';">
                        <p onclick="location.href='login.html';">Account</p>
                    </div>
                    <div class="nav_cart" onclick="location.href='Cart.html';">
                        <img src="https://i.postimg.cc/sXBgkwMf/bag.png" alt="cart_icon" class="cart-icon">
                        <div id="cart-item-counter">0</div>
                        <p>Cart</p>
                    </div>
                </div>
            </div>

            <div class="nav-menu">
                <ul>
                    <li onclick="location.href='brands.html';">Brands</li>
                    <li onclick="location.href='Bestsellers.html';">Bestsellers</li>
                    <li onclick="location.href='SkinCare.html';">Skin Care</li>
                    <li onclick="location.href='Makeup.html';">Makeup</li>
                    <li onclick="location.href='Hair_Care.html';">Hair Care</li>
                    <li onclick="location.href='Bath_Body.html';">Bath & Body</li>
                    <li onclick="location.href='Men.html';">Men</li>
                    <li onclick="location.href='Gifts_Sets.html';">Gifts & Sets</li>
                    <li onclick="location.href='Hair_Care.html';">BeautyFIX</li>
                    <li onclick="location.href='Sale.html';">Sale</li>
                    <li onclick="location.href='SkinCare.html';">Skin 101</li>
                </ul>
            </div>
            <div class="main-mobile-search-container">
                <div class="mobile-search-container">
                    <input type="text" class="mobile-search-input" placeholder="Search for a product or brand..">
                    <img src="https://i.postimg.cc/90c6jfMm/search-interface-symbol.png" alt="search icon"
                        class="mobile-search-button">
                </div>
            </div>
            <div class="mobile-nav-menu">
                <div class="home-close-buttons">
                    <img src="https://i.postimg.cc/QHJ273gD/home-button.png" alt="home button"
                        class="mobile-home-button">
                    <img src="https://i.postimg.cc/Lgdct409/close.png" alt="close button" class="mobile-close-button">
                </div>
                <ul>
                    <li onclick="location.href='Bestsellers.html';">Bestsellers</li>
                    <li onclick="location.href='SkinCare.html';">Skin Care</li>
                    <li onclick="location.href='Makeup.html';">Makeup</li>
                    <li onclick="location.href='Hair_Care.html';">Hair Care</li>
                    <li onclick="location.href='Bath_Body.html';">Bath & Body</li>
                    <li onclick="location.href='Men.html';">Men</li>
                    <li onclick="location.href='Gifts_Sets.html';">Gifts & Sets</li>
                    <li onclick="location.href='SkinCare.html';">BeautyFIX</li>
                    <li onclick="location.href='Sale.html';">Sale</li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- -----------Navigation Bar Ends Here-------------->
    <!--------------below nav 2 rows sections starts here-->
    <div class="below-nav-two-rows">
        <div class="upper_div">
            <img style="margin-left: 0px;" src="https://cdn-icons-png.flaticon.com/128/664/664468.png">
            <p>FREE US Shiping Over $50</p>
            <img src="https://cdn-icons-png.flaticon.com/128/35/35404.png">
            <p>New costomer save 15% with code WELCOME15</p>
            <img src="https://cdn-icons-png.flaticon.com/128/4221/4221657.png">
            <p>Redeem Dermstore Reward</p>
            <img src="https://cdn-icons-png.flaticon.com/128/2089/2089713.png">
            <p>Pay in 4 With klarna</p>
        </div>
        <div class="upper_div2" onclick="location.href='SkinCare.html';">
            Limited Edition SkinCeuticals bundles are here! SHOP NOW.
        </div>
    </div>
    <!--------------below nav 2 rows sections ends here-->


    <div class="cart-container">



        <div class="cart-checkout-section">
            <p style="font-size: 1.4em;">Your Cart</p>
            <button class="checkout-button" onclick="location.href='checkoutpage.html';">
                <img src="https://i.postimg.cc/dV2Hbn7C/lock-icon-final.png" alt="lock icon" class="lock-icon">
                <p>CHECKOUT SECURELY NOW</p>
            </button>
        </div>



        <table id="cart-table">
            <thead class="cart-table-head">
                <tr>
                    <th class="head-item">Items</th>
                    <th class="head-price">Price</th>
                    <th class="head-quantity">Quantity</th>
                    <th class="head-subtotal">Subtoal</th>
                    <th class="head-remove">Remove</th>
                </tr>
            </thead>
            <tbody class="cart-table-body">

            </tbody>
        </table>
        <div class="subtotal-row">
            <p style="font-weight: 600; margin: 5px;">✦ Rewards members earn <span id="reward-points-value"></span> points on
                this order</p>
            <P style="margin: 5px;">Cart Subtotal: <span style="font-weight: bold;">$</span><span style="font-weight: 600;"
                    id="subtotal-value">0</span></P>
        </div>
        <div class="apply-coupon">
            <input id="counpon-code-input" type="text" placeholder="Got a coupon code?Enter it here:">
            <button id="coupon-code-apply-button">ADD</button>
        </div>
        <div id="coupon_message"></div>
    </div>

    <!-------------footer section starts here------------>
    <footer>
        <div class="upper-footer-section">
            <div class="newsletter">
                <p>Sign up to our newsletters and receive the latest exclusive discounts and deals</p>
                <button>SIGN ME UP</button>
            </div>
            <div class="social">
                <p>Connect with us</p>
                <div class="social-icons">
                    <img src="https://i.postimg.cc/bSHcgqd7/facebook-logo.png" alt="facebook">
                    <img src="https://i.postimg.cc/Btx04BNm/twitter.png" alt="twitter">
                    <img src="https://i.postimg.cc/ppRtT56R/instagram.png" alt="instagram">
                    <img src="https://i.postimg.cc/kRdPW2MN/youtube.png" alt="youtube">
                    <img src="https://i.postimg.cc/7GzyC34Y/pinterest.png" alt="pinterest">
                </div>
            </div>
        </div>
        <div class="middle-footer-section">
            <div class="customer-service">
                <ul>
                    <li>Customer Service</li>
                    <li>Help Center / FAQs</li>
                    <li>Returns</li>
                    <li>Shipping Information</li>
                    <li>Order Status</li>
                </ul>
            </div>
            <div class="my-account">
                <ul>
                    <li>My Account</li>
                    <li>Manage My Subscriptions</li>
                    <li>My Rewards</li>
                    <li>My Favorites</li>
                    <li>Referrals</li>
                    <li>Order History</li>
                </ul>
            </div>
            <div class="company">
                <ul>
                    <li>Company</li>
                    <li>About us</li>
                    <li>Press</li>
                    <li>What is Klarna?</li>
                </ul>
            </div>
            <div class="legal">
                <ul>
                    <li>Legal</li>
                    <li>Privacy Policy</li>
                    <li>Terms & Conditions</li>
                    <li>Modern Slavery Statement</li>
                    <li>Product Recall</li>
                    <li>Accessibility</li>
                </ul>
            </div>
        </div>
        <div class="footer-end-section">
            <h1>THG</h1>
            <P>2022 © The Hut.com Ltd.</P>
        </div>
    </footer>
    <!-------------footer section ends here------------>
</body>


<script type="text/javascript" src="../js/navbar.js"></script>



<script>
    var cart_data = JSON.parse(localStorage.getItem("Cart")) || [];
    displayTable(cart_data)

    function displayTable(cart_data) {
        document.querySelector(".cart-table-body").textContent = ""

        cart_data.map(function (elem, index) {
            var cart_row = document.createElement("tr");
            var body_item = document.createElement("td");
            body_item.setAttribute("class", "body-item")
            body_item.style.textAlign = "left"
            var body_item_container = document.createElement("div");
            body_item_container.setAttribute("class", "body-item-container")
            var image = document.createElement("img");
            image.setAttribute("src", elem.image)
            var pdt_name = document.createElement("p");
            pdt_name.textContent = elem.product_name
            body_item_container.append(image, pdt_name)
            body_item.append(body_item_container)
            var item_price = document.createElement("td");
            item_price.textContent = "$" + elem.price
            item_price.setAttribute("class", "body-price")
            body_qty_div = document.createElement("td");
            body_qty_div.setAttribute("class", "body-quantity")
            var item_qty_container = document.createElement("div");
            item_qty_container.setAttribute("class", "body-quantity-container")


            minus_button = document.createElement("button");
            minus_button.setAttribute("class", "decrement-item")
            minus_button.textContent = "-"
            minus_button.setAttribute("id", index);
            minus_button.addEventListener("click", decrement_quantity);



            var item_qty = document.createElement("div");
            item_qty.textContent = elem.qty
            item_qty.setAttribute("class", "disply-item-quantity")

            plus_button = document.createElement("button");
            plus_button.setAttribute("class", "increment-item")
            plus_button.textContent = "+"
            plus_button.setAttribute("id", index);
            plus_button.addEventListener("click", increment_quantity);


            item_qty_container.append(minus_button, item_qty, plus_button)
            body_qty_div.append(item_qty_container)


            var item_total = document.createElement("td");
            item_total.setAttribute("class", "body-subtotal")
            item_total.textContent = "$" + (elem.qty * elem.price).toFixed(2)


            var cross_td = document.createElement("td");
            cross_td.setAttribute("class", "body-remove")

            var cross_button = document.createElement("button");
            cross_button.textContent = "X";
            cross_button.setAttribute("class", "remove-item-cart")

            cross_button.setAttribute("id", index);
            cross_button.addEventListener("click", deleteTask);

            cross_td.append(cross_button)
            cart_row.append(body_item, item_price, body_qty_div, item_total, cross_td)
            document.querySelector(".cart-table-body").append(cart_row)
        });

        cart_total = cart_data.reduce((accum, value) => value.price * value.qty + accum, 0)
        document.getElementById("reward-points-value").textContent = Math.floor(cart_total*5);
        document.getElementById("subtotal-value").textContent = cart_total.toFixed(2);
        localStorage.setItem("couponTotal", JSON.stringify(cart_total));
    }


    function deleteTask(ev) {
        cart_data = cart_data.filter(function (value, index, cart_data) {
            return ev.target.id != index;
        });
        localStorage.setItem("Cart", JSON.stringify(cart_data));
        displayTable(cart_data);
    }

    function increment_quantity(ev) {
        cart_data[event.target.id].qty += 1
        localStorage.setItem("Cart", JSON.stringify(cart_data));
        displayTable(cart_data);
    }

    function decrement_quantity(ev) {
        cart_data[event.target.id].qty -= 1
        if (cart_data[event.target.id].qty == 0) {
            deleteTask(ev)
        } else {

            localStorage.setItem("Cart", JSON.stringify(cart_data));
            displayTable(cart_data);
        }
    }
    var avialableCouponCode = ["GET10","WELCOME15","GET20","GET30","GET50"]
    document.getElementById("coupon-code-apply-button").addEventListener("click",() =>{
        
        var inputCoupon = document.getElementById("counpon-code-input").value
        var sucessornot = 0;
        for(var i = 0;i< avialableCouponCode.length;i++){
            if(avialableCouponCode[i]== inputCoupon){
                if(inputCoupon == "GET10"){
                    cart_total = cart_total*0.9
                }
                if(inputCoupon == "WELCOME15"){
                    cart_total = cart_total*0.85
                }
                if(inputCoupon == "GET20"){
                    cart_total = cart_total*0.8
                }
                if(inputCoupon == "GET30"){
                    cart_total = cart_total*0.7
                }
                if(inputCoupon == "GET50"){
                    cart_total = cart_total*0.5
                }
                document.getElementById("reward-points-value").textContent = Math.floor(cart_total*5)
                document.getElementById("subtotal-value").textContent = cart_total.toFixed(2);
                document.getElementById("coupon_message").textContent = "Coupon Code Applied ✔"
                document.getElementById("coupon_message").style.color = "green"
                sucessornot++
            }
        }
        if(sucessornot==0){
            document.getElementById("coupon_message").textContent = "Invalid Coupon Code ✘" 
            document.getElementById("coupon_message").style.color = "red"
        }
        localStorage.setItem("couponTotal", JSON.stringify(cart_total));
    })
    

</script>